<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>職場コミュニケーション練習アプリ</title>
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
    <div id="chat-container">
        <h1>職場コミュニケーション練習アプリ</h1>
        
        <div class="model-selection">
            <h2>🤖 AIモデルを選択</h2>
            <p>会話に使用するAIモデルを選択してください。OpenAIのモデルは高精度ですが、ローカルモデル（Ollama）はプライバシーを重視する場合に適しています。</p>
            <div class="model-select-container">
                <select id="model-select" class="enhanced-select">
                    <optgroup label="Google Gemini Models">
                        {% for model in models %}
                            {% if model.startswith('gemini/') %}
                                <option value="{{ model }}">
                                    {{ model.replace('gemini/', '') }}
                                </option>
                            {% endif %}
                        {% endfor %}
                    </optgroup>
                    <optgroup label="OpenAI Models">
                        {% for model in models %}
                            {% if model.startswith('openai/') %}
                                <option value="{{ model }}">
                                    {{ model.replace('openai/', '') }}
                                </option>
                            {% endif %}
                        {% endfor %}
                    </optgroup>
                    <optgroup label="Local Models (Ollama)">
                        {% for model in models %}
                            {% if not model.startswith('openai/') and not model.startswith('gemini/') %}
                                <option value="{{ model }}">
                                    {{ model }}
                                </option>
                            {% endif %}
                        {% endfor %}
                    </optgroup>
                </select>
            </div>
        </div>

        <div class="content-section">
            <div class="welcome-section">
                <h2>🎯 アプリの目的</h2>
                <p>このアプリは、職場でのコミュニケーションスキルを安全に練習できる環境を提供します。
                   実際の場面を想定したロールプレイを通じて、自己理解を深め、
                   コミュニケーション能力の向上を支援します。</p>
            </div>

            <div class="features-grid">
                <div class="feature-card">
                    <h3>🎭 シナリオロールプレイ</h3>
                    <p>実際の職場で起こりうる場面を再現し、AIと対話形式で練習できます。</p>
                    <a href="{{ url_for('list_scenarios') }}" class="primary-button">シナリオを選ぶ</a>
                </div>

                <div class="feature-card">
                    <h3>💭 自由会話練習</h3>
                    <p>特定のシナリオにとらわれず、自由なテーマでAIと会話練習ができます。</p>
                    <a href="{{ url_for('chat') }}" class="primary-button">会話を始める</a>
                </div>

                <div class="feature-card">
                    <h3>👥 LLM観戦モード</h3>
                    <p>2つのAIモデルが会話する様子をリアルタイムで観戦できます。</p>
                    <a href="{{ url_for('watch_mode') }}" class="primary-button">観戦する</a>
                </div>
            </div>

            <div class="info-section">
                <h2>💡 使い方</h2>
                <ol>
                    <li>「シナリオを選ぶ」から練習したい場面を選択</li>
                    <li>AIとロールプレイを実施</li>
                    <li>会話終了後にフィードバックを取得</li>
                    <li>振り返りと改善点の確認</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        // ページ読み込み時に最初のモデルを保存
        window.addEventListener('load', function() {
            const modelSelect = document.getElementById('model-select');
            if (modelSelect && modelSelect.value) {
                localStorage.setItem('selectedModel', modelSelect.value);
            }
        });

        // モデル選択時の保存
        document.getElementById('model-select').addEventListener('change', function() {
            const selectedModel = this.value;
            localStorage.setItem('selectedModel', selectedModel);
        });
    </script>

    <li><a href="{{ url_for('watch_mode') }}">LLM観戦モード</a></li>
</body>
</html>

